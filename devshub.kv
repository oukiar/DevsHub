#:import ScrollBox devslib.scrollbox
#:import ImageButton devslib.utils
#:import DatePicker datepicker

<Clientes>:

<InventoryItem>:
    txt_clave:txt_clave
    txt_producto:txt_producto
    txt_existencias:txt_existencias
    txt_minimo:txt_minimo
    txt_maximo:txt_maximo
    txt_precio:txt_precio
    btn_action:btn_action
    size_hint_y: None
    height: 40
    TextInput:
        size_hint_x: None
        id: txt_clave
        multiline: False
        write_tab: False
    TextInput:
        id: txt_producto
        multiline: False
        write_tab: False
    TextInput:
        size_hint_x: None
        id: txt_existencias
        multiline: False
        write_tab: False
    TextInput:
        size_hint_x: None
        id: txt_minimo
    TextInput:
        size_hint_x: None
        id: txt_maximo
    TextInput:
        size_hint_x: None
        id: txt_precio
    Button:
        id: btn_action
        size_hint_x: None
        text: "+"
        width: 40
        on_press: root.addInventoryItem(self)

<Inventory>:
    lst_inventory:lst_inventory
    padding: 30
    
    canvas.before:            
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size 
    
    BoxLayout:
        orientation: 'vertical'
        
        canvas.before:            
            Color:
                rgba: .96, .96, .96, 1
            Rectangle:
                pos: self.pos
                size: self.size 
        
        BoxLayout:
            size_hint_y: None
            height: 40
            BlackLabel:
                size_hint_x: None
                text: "Buscar"
            TextInput:
            Button:
                size_hint_x: None
                text: "Filtrar"
    
        
        BoxLayout:
            size_hint_y: None
            BlackLabel: 
                size_hint_x: None
                text: "Clave"
            BlackLabel: 
                text: "Producto"
            BlackLabel: 
                text: "Existencias"
                size_hint_x: None
            BlackLabel: 
                text: "Minimo"
                size_hint_x: None
            BlackLabel: 
                text: "Maximo"
                size_hint_x: None
            BlackLabel:
                text: "Precio"
                size_hint_x: None
            BlackLabel: 
                text: "Add"
                width: 40
                size_hint_x: None
        
        ScrollBox:
            orientation: "vertical"
            id: lst_inventory
            InventoryItem:


<AddClient>:
    txt_name:txt_name
    txt_direccion:txt_direccion
    txt_telefono:txt_telefono
    txt_ife:txt_ife
    txt_monedero:txt_monedero
    
    orientation: "vertical"
    padding: 20
    spacing: 10
    BlackLabel:
        text: "Nombre:"
    TextInput:
        id: txt_name
    BlackLabel:
        text: "Direccion:"
    TextInput:
        id: txt_direccion
    BlackLabel:
        text: "Telefono:"
    TextInput:
        id: txt_telefono
    BlackLabel:
        text: "IFE:"
    TextInput:
        id: txt_ife
    BlackLabel:
        text: "Monedero:"
    TextInput:
        id: txt_monedero
        
    Button:
        text: "Agregar"
        on_press: app.root.saveClient(self)

<BlackLabel@Label>:
    size_hint_y: None
    height: 40
    color: (0,0,0,1)

<WhiteButton>:
    background_color: (1,1,1,1)
    background_normal: ""
    color: (0,0,0,1)



<Ticket>:
    txt_fecha:txt_fecha
    txt_cliente:txt_cliente
    txt_total:txt_total
    
    size_hint_y: None
    height: 40
    TextInput:
        size_hint_x: None
        id: txt_fecha
        background_normal: ""
        multiline: False
        write_tab: False
    TextInput:
        id: txt_cliente
        background_normal: ""
        multiline: False
        write_tab: False
    TextInput:
        size_hint_x: None
        id: txt_total
        background_normal: ""
        multiline: False
        write_tab: False

<NoteItem>:
    txt_cant:txt_cant
    txt_producto:txt_producto
    txt_precio:txt_precio
    txt_total:txt_total
    btn_action:btn_action
    size_hint_y: None
    height: 40
    TextInput:
        size_hint_x: None
        id: txt_cant
        background_normal: ""
        multiline: False
        write_tab: False
        focus: True
        text: "1"
    TextInput:
        id: txt_producto
        on_text: root.on_completeproduct(self)
        background_normal: ""
        multiline: False
        write_tab: False
    TextInput:
        size_hint_x: None
        id: txt_precio
        background_normal: ""
        multiline: False
        write_tab: False
    TextInput:
        size_hint_x: None
        id: txt_total
        background_normal: ""
        multiline: False
        write_tab: False
    Button:
        id: btn_action
        size_hint_x: None
        text: "+"
        width: 40
        on_press: root.addNoteItem(self)

<Pos>:
    txt_total:txt_total
    txt_client:txt_client
    img_button:img_button
    orientation: "vertical"
    padding: 30
    spacing: 10
    lst_note:lst_note
    
    TabbedPanel:
        do_default_tab: False
        tab_pos: 'left_mid'
        
        canvas.before:            
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size 

                
        
        TabbedPanelItem:
            text: "Vender"
            canvas.before:            
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size 
                    
            BoxLayout:
            
                canvas.before:            
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size 
                    
                orientation: "vertical"
                BoxLayout:
                    size_hint_y: None
                    height: 40
                    BlackLabel:
                        text: "Cliente"
                    TextInput:
                        id: txt_client
                        on_text: root.on_completeclient(self)
                    
                    ImageButton:
                        source: "plus.png"
                        size_hint_x: None
                        width:40
                        on_press: root.addClient()
                        id: img_button
                
                BoxLayout:
                    orientation: 'vertical'   
                    padding: 10   
                        
                    canvas.before:            
                        Color:
                            rgba: 0.96, 0.96, 0.96, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size 
                    
                    BoxLayout:
                        size_hint_y: None
                        height: 40
                        
                        
                        canvas.before:            
                            Color:
                                rgba: .8, .8, 1, 1
                            Rectangle:
                                pos: self.pos
                                size: self.size 
                        
                        BlackLabel: 
                            size_hint_x: None
                            text: "Cant"
                        BlackLabel: 
                            text: "Producto"
                        BlackLabel: 
                            text: "Precio"
                            size_hint_x: None
                        BlackLabel: 
                            text: "Total"
                            size_hint_x: None
                        BlackLabel: 
                            text: "+"
                            size_hint_x: None
                            width: 40
                    
                    ScrollBox:
                        id: lst_note
                        orientation: "vertical"
                        
                        canvas.before:            
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                pos: self.pos
                                size: self.size 
                                
                        NoteItem:
                    
                BoxLayout:
                    size_hint_y: None
                    BlackLabel: 
                        text: "Total:"
                        font_size: 40
                        size_hint_x: None
                        width: 150
                    BlackLabel: 
                        font_size: 40
                        id: txt_total
                        color: (.1,.1,.1,1)
                        text: "0"
                        size_hint_x: None

                    AnchorLayout:
                        anchor_x: "right"

                        Button: 
                            size_hint_x: None
                            width: 150
                            text: "ACEPTAR"
                            on_press: root.hacerNota()
                        
        TabbedPanelItem:
            text: "Notas"
            
            BoxLayout:
                orientation: "vertical"
                canvas.before:            
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size 
                        
                Label:
                    text: "Historial de ventas"
                    size_hint_y: None
                    color: (0,0,0,1)
                    font_size: 32
                    
                BoxLayout:
                    size_hint_y: None
                    height: 40
                    
                    
                    canvas.before:            
                        Color:
                            rgba: .8, .8, 1, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size 
                    
                    BlackLabel: 
                        size_hint_x: None
                        text: "Fecha"
                    BlackLabel: 
                        text: "Cliente"
                    BlackLabel: 
                        text: "Total"
                        size_hint_x: None
                        
                ScrollBox:
                    orientation: "vertical"
                    Ticket:
                    

<TaskMenu>:
    size_hint: (None,None)
    size:(700,550)
    title: "Detalles de tarea"
    txt_tarea:txt_tarea
    lst_status:lst_status
    BoxLayout:
        spacing: 10
        orientation: "vertical"
        BoxLayout:
            size_hint_y: None
            height: 40
            Label:
                text: "Editar tarea"
            TextInput:
                multiline: False
                write_tab: False
                id: txt_tarea
                
        BoxLayout:
            size_hint_y: None
            height: 40
            Label:
                text: "Status:"
            Spinner:
                values: ("Pending", "In progress", "Done")
                id: lst_status
                
        BoxLayout:
            size_hint_y: None
            height: 40
            Label:
                text: "Clase:"
            ImageButton:
                source: "plus.png"
                size_hint_x: None
                width:40
            Spinner:
                values: ("Privado", "Publico")
                text: "Privado"
                
        BoxLayout:
            padding: 5
            orientation: "vertical"
            Label:
                text: "Fecha limite"
                size_hint_y: None
                height: 40
            DatePicker:
        
        Button:
            text: "Guardar"
            size_hint_y: None
            height: 50
            on_press: root.selfSave()
            
        Button:
            text: "Eliminar"
            size_hint_y: None
            height: 50
            on_press: root.selfDelete()

<BattlePlanItem@BoxLayout>:
    tasktext:tasktext
    img_menu:img_menu
    size_hint_y: None
    height: 40
    ImageButton:
        id: img_menu
        source: "menu_pending.png"
        size_hint_x: None
        width: 32
        on_press: root.open_menu()
    Label:
        id: tasktext
        color: (0,0,0,1)
        text_size: self.width, None
        size: self.texture_size
        
<BattlePlan>:
    orientation: "vertical"
    padding:20
    spacing:20
    tasks:tasks
    tasktext:tasktext
    
    canvas.before:            
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size 
    
    Label:
        font_size: 45
        text: "Plan de batalla"
        color:(0,0,0,1)
        size_hint_y: None
        height: 100
    AnchorLayout:
        size_hint_y: None
        height: 40
        anchor_x: "center"
        anchor_y: "top"
        BoxLayout:
            TextInput:
                size_hint_x: .8
                multiline: False
                id: tasktext
                on_text_validate: root.addTask()
                
            ImageButton:
                source: "update.png"
                size_hint_x: None
                width: 50
        
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "top"

        ScrollBox:
            id: tasks
            orientation: "vertical"
            size_hint_x: None
            width: 600


<Main>:
    txt_username:txt_username
    orientation: "vertical"
    battleplan: battleplan
    padding: 50
    
    canvas.before:            
        Color:
            rgba: 0.9, 0.9, 0.9, 1
        Rectangle:
            pos: self.pos
            size: self.size 
            
    BoxLayout:
        size_hint_y: None
        height: 40
        Label:
            text: "Username"
            color: (0,0,0,1)
            id:txt_username
            font_size: 35
            
    BoxLayout:
        size_hint_y: None
        height: 40
        Button:
            text: "BattlePlan"
            background_color: (0,0,0,1)
            on_press: root.show_battleplan()
        Button:
            text: "Ventas"
            on_press: root.show_ventas()
        Button:
            text: "Inventario"
            on_press: root.show_inventario()
        Button:
            text: "Servicios"
            on_press: root.show_servicios()
        Button:
            text: "Rentas"
            on_press: root.show_rentas()
        Button:
            text: "Organizacion"
            on_press: root.show_organizacion()
        Button:
            text: "Clientes"
            on_press: root.show_clientes()
        Button:
            text: "Garantias"
            on_press: root.show_garantias()
            
    BattlePlan:
        id: battleplan

<Login@AnchorLayout>:
    anchor_x: "center"
    anchor_y: "center"
    txt_email:txt_email
    txt_password:txt_password
    BoxLayout:
        size_hint: (None, None)
        size: (400,300)
        orientation: "vertical"
        spacing: 20
        Label:
            text: "Email"
            size_hint_y: None
            height: 30
        TextInput:
            id: txt_email
            multiline: False
            write_tab: False
            on_text_validate: root.txt_password.focus=True
            text: "devsinc@hotmail.com"
        Label:
            text: "Contraseña"
            size_hint_y: None
            height: 30
            
        TextInput:
            id: txt_password
            password: True
            multiline: False
            write_tab: False
            on_text_validate: app.root.do_login(root)
            text: "seisdevs_2010"
            
        Button:
            text: "Login"
            on_press: app.root.do_login(root)
            

<DevsHub>:
    Login:
